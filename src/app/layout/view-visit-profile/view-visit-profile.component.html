  <p style="margin-top:80px;"></p>

<ngx-loading [show]="loading" [config]="{backdropBorderRadius: '14px'}"></ngx-loading>
<ngx-alerts></ngx-alerts>


                         <ng-template #content let-c="close" let-d="dismiss" >
                        <div class="modal-header" >
                            <h4 class="modal-title">{{ 'ViewVisitProfile.register' | translate }} *</h4>
                            <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body" >

                            
                            <div class="row">
                               
                                <div class="col-md-12">

                                    <form role="form" [formGroup]="registerForm" (ngSubmit)="registrarVisita()">
                                        <div class="form-group"  >
                                            <label>{{ 'ViewVisitProfile.th1' | translate }} </label>
                                            <input class="form-control" placeholder="Enter text" formControlName="nombre" >
                                        </div>
                                        <div class="form-group"  >
                                            <label>{{ 'ViewVisitProfile.th3' | translate }} </label>
                                            <input class="form-control" placeholder="Enter text" formControlName="numNidos" >
                                        </div>
                                        <div class="form-group"  >
                                            <label>{{ 'ViewVisitProfile.th4' | translate }} </label>
                                            <input class="form-control" placeholder="Enter text" formControlName="numNidosExito" >
                                        </div>
                                        <div class="form-group"  >
                                            <label>{{ 'ViewVisitProfile.th5' | translate }} </label>
                                            <input class="form-control" placeholder="Enter text" formControlName="numNidosOcupados" >
                                        </div>
                                        <div class="form-group"  >
                                            <label>{{ 'ViewVisitProfile.th6' | translate }} </label>
                                            <input class="form-control" placeholder="Enter text" formControlName="numNidosVacios" >
                                        </div>
                                        <div class="form-group"  >
                                            <label>{{ 'ViewVisitProfile.numVisita' | translate }} </label>
                                            <input class="form-control" placeholder="Enter text" formControlName="numVisita" >
                                        </div>

                                        <div class="form-group">
                                            <label>{{ 'RegisterCol.temp' | translate }} </label>
                                            <select class="form-control"  formControlName="temporada" >
                                                
                                                <option *ngFor="let temp of listaTemporadas" value="{{temp}}" id="{{temp}}">{{temp}}</option>
                                            </select>

                                        </div>

                                        <div class="form-group">
                                            <label>{{ 'ViewVisitProfile.upload' | translate }} </label>
                                            <input type="file" name="file" (change)="preUpload($event)" multiple />
                                        </div>


                                    </form>
                                </div>
                            </div>


                        </div>
                        <ngb-carousel>
                            <ng-template ngbSlide *ngFor="let slider of sliders">
                                <img class="img-fluid mx-auto d-block" [src]="slider.imagePath" alt="Random first slide" width="100%">
                                <div class="carousel-caption">
                                    <h3>{{slider.label}}</h3>
                                    <p>{{slider.text}}</p>
                                </div>
                            </ng-template>
                        </ngb-carousel>
                        <div class="modal-footer">
                            <p> (*) {{ 'ViewVisitProfile.infoMsg1' | translate }}</p>
                            <button  type="button" class="btn btn-primary" [disabled]="registerForm.invalid" (click)="registraVisita()" (click)="c('Close click')"> {{ 'ViewVisitProfile.register2' | translate }}</button>


                            <button type="button" class="btn btn-secondary" (click)="c('Close click')"> {{ 'ColoniaModal.close' | translate }}</button>
                        </div>
                        </ng-template>




    <div class="row">
        <div class="col-sm-12">
           
            <div class="card">
                <div class="card-header">{{ 'ViewVisitProfile.title' | translate }} {{colId}}</div>
                <div class="card-body table-responsive">
                    <table class="table table-hover table-striped">
                        <thead>
                        <tr>
                            <th>{{ 'ViewVisitProfile.th1' | translate }}</th>
                            <th>{{ 'ViewVisitProfile.th2' | translate }}</th>
                            <th>{{ 'ViewVisitProfile.th3' | translate }}</th>
                            <th>{{ 'ViewVisitProfile.th4' | translate }}</th>
                            <th>{{ 'ViewVisitProfile.th5' | translate }}</th>
                            <th>{{ 'ViewVisitProfile.th6' | translate }}</th>
                            <th>{{ 'ViewVisitProfile.numVisita' | translate }}</th>
                            <th>{{ 'ViewVisitProfile.th7' | translate }}</th>
                            



                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let item of listaVisitas">




                         <ng-template #content let-c="close" let-d="dismiss" >
                        <div class="modal-header" >
                            <h4 class="modal-title">{{ 'ViewVisitProfile.modify' | translate }} *</h4>
                            <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body" >

                            
                            <div class="row">
                               
                                <div class="col-md-12">

                                    <form role="form" [formGroup]="registerForm" (ngSubmit)="registrarVisita()">
                                        <div class="form-group"  >
                                            <label>{{ 'ViewVisitProfile.th1' | translate }} </label>
                                            <input class="form-control" placeholder="Enter text" formControlName="nombre" >
                                        </div>
                                        <div class="form-group"  >
                                            <label>{{ 'ViewVisitProfile.th3' | translate }} </label>
                                            <input class="form-control" placeholder="Enter text" formControlName="numNidos" >
                                        </div>
                                        <div class="form-group"  >
                                            <label>{{ 'ViewVisitProfile.th4' | translate }} </label>
                                            <input class="form-control" placeholder="Enter text" formControlName="numNidosExito" >
                                        </div>
                                        <div class="form-group"  >
                                            <label>{{ 'ViewVisitProfile.th5' | translate }} </label>
                                            <input class="form-control" placeholder="Enter text" formControlName="numNidosOcupados" >
                                        </div>
                                        <div class="form-group"  >
                                            <label>{{ 'ViewVisitProfile.th6' | translate }} </label>
                                            <input class="form-control" placeholder="Enter text" formControlName="numNidosVacios" >
                                        </div>
                                        <div class="form-group"  >
                                            <label>{{ 'ViewVisitProfile.numVisita' | translate }} </label>
                                            <input class="form-control" placeholder="Enter text" formControlName="numVisita" >
                                        </div>




                                    </form>
                                </div>
                            </div>


                        </div>
                        <div class="modal-footer">
                            <p> (*) {{ 'ViewVisitProfile.infoMsg1' | translate }}</p>


                            <button  type="button" class="btn btn-primary" [disabled]="registerForm.invalid" (click)="editaVisita(item)" (click)="c('Close click')"> {{ 'ViewVisitProfile.edit' | translate }}</button>

                            <button type="button" class="btn btn-secondary" (click)="c('Close click')"> {{ 'ColoniaModal.close' | translate }}</button>
                        </div>
                        </ng-template>



                        <ng-template #contentEliminar let-c="close" let-d="dismiss" >
                        <div class="modal-header" >
                            <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body" >

                            
                            <div class="row">
                               
                                <div class="col-md-12">
                                    {{ 'ViewVisitProfile.infoMsg3' | translate }}
                                </div>
                            </div>


                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" (click)="c('Close click')" (click)="eliminaVisita(item)"> {{ 'ViewVisitProfile.yes' | translate }}</button>

                            <button type="button" class="btn btn-secondary" (click)="c('Close click')"> {{ 'ViewVisitProfile.no' | translate }}</button>
                        </div>
                        </ng-template>





                            <td>{{item.nombreUsuario}}</td>
                            <td>{{item.fecha}}</td>
                            <td>{{item.numNidos}}</td>
                            <td>{{item.numNidosExito}}</td>
                            <td>{{item.numNidosOcupados}}</td>
                            <td>{{item.numNidosVacios}}</td>
                            <td>{{item.numVisita}}</td>

                            
                            
                            <td *ngIf="usuario==item.usuario">
                                <button class="transparentButton" (click)="editaVisitaModal(item, content)">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="transparentButton" (click)="eliminaVisitaModal(contentEliminar)">
                                    <i class="fas fa-trash-alt"></i>
                                </button>


                            </td>
                            <td *ngIf="usuario!=item.usuario"> {{ 'ViewVisitProfile.noAction' | translate }}</td>



                        </tr>

                        </tbody>
                    </table>
                </div>
           </div>
          
        </div>

        <div class="col-sm-12">
            <div *ngIf="totalPages>0">
                                <ngb-pagination [collectionSize]="totalPages" [(page)]="advancedPagination" [maxSize]="5" [rotate]="true" [boundaryLinks]="true"
                                (pageChange)="pageChanged($event)">
                                </ngb-pagination>
            </div>
            <div *ngIf="totalPages<=0 && listaVisitas.length<=0" style="text-align: center">
                {{ 'ViewVisitProfile.noData' | translate }}
            </div>
        </div>
        <div class="col-sm-8">
            <button class="btn btn-primary" (click)="openLg(content)">{{ 'ViewVisitProfile.register' | translate }}</button>
        </div>
        <div class="col-sm-4">
            <button class="btn btn-secondary" (click)="exportAsXLSX(item)">{{ 'Menu.excel' | translate }}<i class="fas fa-cloud-download-alt"></i></button>
            </div>

    </div>

